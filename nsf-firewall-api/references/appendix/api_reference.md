# 附录 - API参考文档

## A.1 REST API配置

### A.1.1 配置

**步骤 1** 登录 NF 后，选择菜单 **系统** > **系统** > **北向接口**，如图 1-1所示：

图 1-1 北向接口配置页面

**步骤 2** 查看用户信息

在 **REST API** 下方的列表中可以查看到用户的信息，点击"操作"一栏的编辑图标，即可对用户的信息进行编辑，如图 1-2 所示：

图 1-2 查看用户信息

**步骤 3** 配置服务器参数

在 **配置** 功能框中下方可以配置服务器的参数，如图 1-3 所示：

图 1-3 配置服务器参数

参数说明如下所示：

| 配置项 | 描述 |
|--------|------|
| 服务器类型 | 支持 https 方式登录 REST API 接口。 |
| 服务器端口 | 配置通过 HTTPS 协议对 NF 进行 REST API 访问的端口号，默认为 8081。<br><br>注意：修改端口号可能会引发系统内置 REST API 账号不可用，请谨慎操作。 |
| 启用 | 是，启用当前配置；<br><br>否，禁用当前配置； |

点击【确定】按钮后，即可启用该功能。

**步骤 4** 添加新用户

点击【新建】按钮可以添加新的 REST API 用户，界面如图 1-4 所示：

图 1-4 添加新的 REST API 用户

参数说明如表所示：

| 配置项 | 描述 |
|--------|------|
| 用户名 | 允许访问 REST API 接口支持的用户 |
| 允许登录的 IP | 显示允许进行 REST API 接口访问的 IP 地址。<br><br>*，表示所有 IP 地址均可访问。 |
| 过期时间间隔 | 当前 REST API 在多长时间后过期 |
| TOKEN | 不需要填写，通过点击"生成 TOKEN"按钮生成，主要根据用户名、允许登录的 IP和过期时间间隔生成 |
| 过期时间 | 不需要填写，通过点击"生成 TOKEN"按钮生成，主要根据用户名、允许登录的 IP和过期时间间隔生成 |
| 启用 | 是，启用当前 REST API 账户；<br><br>否，禁用当前 REST API 账户； |

点击【确定】按钮完成用户添加。

### A.1.2 REST API接口地址说明

```
{schema}://{host}:{port}/{prefix}/{resource}
```

如：`http://192.168.1.12:8081/north/nf/devices`，各个参数的说明如下表所示：

| 字段 | 说明 |
|------|------|
| schema | API接口支持的协议（https） |
| host | 提供API服务的主机名称或IP |
| port | 提供API服务的主机端口 |
| prefix | 系统API服务的前缀，如/north/nf |
| resource | 资源名称 |
| 携带header | 请求Header中携带参数Authorization的值为REST API用户的token即可 |

## A.2 HTTP响应码

| 响应码 | 描述 |
|--------|------|
| 200 | OK – 操作顺利完成 |
| 201 | Created – 客户端请求成功创建了一个新资源时，可发送此响应码 |
| 204 | No Content – 服务器端拒绝对PUT、POST或DELETE请求返回任何状态信息或表示，可发送此响应码 |
| 301 | Moved Permanently – 客户端触发的动作引起资源URI变化时发送此响应码，或者客户端请求一个资源的旧url时也发送此响应码 |
| 400 | Bad Request – 客户端请求参数不合法 |
| 401 | Unauthorized – 客户端试图操作一个受保护资源，却又没有提供正确的认证证书，可发送此响应码 |
| 403 | Forbidden – 客户端请求正确，认证也正确，但由于请求资源只允许在指定时间段内，或者只允许指定ip的用户访问，可发送此响应码 |
| 404 | Not Found – 客户端请求的资源不存在 |
| 405 | Method Not Allowed – 客户端试图使用一个本资源不支持的HTTP方法时，可发送此响应码 |
| 409 | Conflict – 客户端试图执行一个"会导致一个或多个资源处于不一致状态"的操作时，可发送此响应码 |
| 410 | Gone – 服务器知道被请求资源曾经指向一个资源，但该资源现在不存在了，可发送此响应码 |
| 413 | Request Entity Too Large – 客户端发送的表示太大以至于服务器无法处理时，可发送此响应码 |
| 414 | Request-URI Too Long – 客户端请求URL长度超过服务端处理能力时，可发送此响应码 |
| 415 | Unsupported Media Type – 客户端在发送表示时采用了一个服务端无法理解的媒体类型，可发送此响应码 |
| 500 | Internal Server Error – 服务器端发生未知故障 |
| 503 | Service Unavailable – 服务器正常，但由于下层服务不正常（如系统资源不足或正在遭受大量恶意请求）以至于不能全部处理，可发送此响应码 |

## A.3 全局错误码

| 系统状态码 | 状态码说明 | 备注 |
|------------|------------|------|
| 2001 | 操作失败 | |
| 3000 | 请求被拒绝，未登录 | |
| 3001 | 请求被拒绝，无权限 | |
| 4000 | 底层错误 | |
| 8100 | 文件导入失败 | |
| 8101 | 文件导出失败 | |
| 8102 | 文件类型不合规 | |
| 8103 | 文件大小不合规 | |
| 8104 | 文件读取失败 | |
| 8105 | 文件内容不合规 | |
| 8106 | 文件内容有重复数据 | |
| 8200 | 缺少必填数据 | |
| 8201 | 数据类型不合规 | |
| 8202 | 数量不合规 | |
| 8203 | 长度不合规 | |
| 8204 | 范围不合规 | |
| 8205 | 参数不合规 | |
| 8206 | 名称重复 | |
| 8207 | 已存在相同配置数据 | |
| 8300 | 数据库同步失败 | |
| 8301 | 数据库查询失败 | |
| 8302 | 资源未找到 | |
| 8303 | 资源已达到上限 | |
| 8304 | 资源被使用中 | |
| 8400 | 业务逻辑错误 | |
| 8600 | 不支持的操作 | |
| 8601 | 未知错误 | |

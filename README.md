# 绿盟NF防火墙REST API管理技能 - 功能说明

## 概述

本技能提供绿盟NF605防火墙的自动化运维能力，支持通过REST API进行全面管理，涵盖策略配置、网络管理、对象管理、系统维护等多个领域。

---

## 一、防火墙策略管理

| 功能 | 说明 |
|------|------|
| 获取策略列表 | 获取防火墙策略，支持分页、搜索、筛选 |
| 新建/编辑策略 | 创建或修改防火墙访问控制策略 |
| 删除策略 | 删除指定的防火墙策略 |
| 清空命中次数 | 清零策略命中统计 |
| 清空所有策略 | 批量清空防火墙策略 |
| 批量编辑策略 | 批量修改多个策略属性 |
| 启用/禁用策略 | 开启或关闭指定策略 |
| 移动策略 | 调整策略优先级顺序 |
| 智能策略检测 | 智能分析策略配置 |
| 冲突检测 | 检测策略之间的冲突 |
| 全局配置查询/更新 | 获取或修改防火墙全局配置 |
| 功能特性控制 | 根据证书控制安全模板功能 |
| 策略组管理 | 创建/编辑/删除/清空策略组 |

---

## 二、黑白名单管理

| 功能 | 说明 |
|------|------|
| 黑名单管理 | 获取/新建/编辑/删除/清空/导出/导入黑名单 |
| 白名单管理 | 获取/新建/编辑/删除/清空/导出/导入白名单 |
| 日志配置 | 配置黑白名单全局日志和class日志 |
| 有效时间管理 | 配置IPS/AV有效时间 |
| 超时数据处理 | 处理IPS/AV超时数据 |
| 规格统计 | 黑白名单规格数据统计 |

---

## 三、NAT策略管理

| 功能 | 说明 |
|------|------|
| 源NAT | 新建/编辑源NAT策略 |
| 目的NAT | 新建/编辑目的NAT策略 |
| 双向NAT | 新建/编辑双向NAT策略 |
| NAT策略总览 | 获取NAT策略树形总览 |
| 获取NAT策略 | 获取NAT策略详细信息 |
| 删除NAT策略 | 删除指定的NAT策略 |
| 清空NAT策略 | 清空所有NAT策略 |
| 启用/禁用NAT | 开启或关闭NAT策略 |
| 移动NAT策略 | 调整NAT策略优先级 |

---

## 四、网络对象管理

| 功能 | 说明 |
|------|------|
| 获取网络对象 | 获取网络对象信息列表 |
| 新建/编辑网络对象 | 创建或修改子网/节点/地址池/MAC/地址组/域名组 |
| 网络对象总览 | 获取网络对象树形总览 |
| 删除网络对象 | 删除指定的网络对象 |
| 域名配置 | 设置域名策略域名解析层数 |

**对象类型**：
- 子网 (segment)
- 节点 (node)
- 地址池 (pool)
- MAC地址 (mac)
- 地址组 (group)
- 域名组 (domain)

---

## 五、服务对象管理

| 功能 | 说明 |
|------|------|
| 获取服务对象 | 获取服务对象列表 |
| 新建/编辑服务对象 | 创建或修改服务对象 |
| 获取服务对象ID | 获取服务对象名称和ID映射 |
| 服务对象总览 | 获取服务对象树形总览 |
| 删除服务对象 | 删除指定的服务对象 |

---

## 六、网络接口管理

| 功能 | 说明 |
|------|------|
| 获取接口列表 | 获取所有网络接口信息 |
| 获取所有接口 | 获取完整接口列表数据 |
| 编辑三层接口 | 配置三层网络接口 |
| 新建三层子接口 | 创建三层子接口 |
| 编辑三层子接口 | 修改三层子接口配置 |
| 新建虚拟线对 | 创建虚拟线对 |
| 编辑虚拟线对 | 修改虚拟线对配置 |
| 获取加密公钥 | 获取PPPOE加密公钥 |

---

## 七、安全区管理

| 功能 | 说明 |
|------|------|
| 获取安全区信息 | 查询安全区配置 |
| 创建/编辑安全区 | 新建或修改安全区 |
| 删除安全区 | 删除指定的安全区 |

---

## 八、路由管理

| 功能 | 说明 |
|------|------|
| 获取策略路由 | 获取策略路由列表 |
| 新建/编辑策略路由 | 创建或修改策略路由 |
| 删除策略路由 | 删除指定的策略路由 |

---

## 九、链路探测

| 功能 | 说明 |
|------|------|
| 获取链路探测 | 获取链路探测配置信息 |
| 新建/编辑链路探测 | 创建或修改链路探测 |
| 删除链路探测 | 删除指定的链路探测 |
| 启用/禁用链路探测 | 开启或关闭链路探测功能 |

---

## 十、系统管理

| 功能 | 说明 |
|------|------|
| 系统信息 | 获取系统基本信息 |
| 主机名管理 | 获取/设置设备主机名 |
| DNS配置 | 获取/设置DNS服务器 |
| NTP配置 | 获取/设置NTP时间同步 |
| 管理员管理 | 获取/添加/修改/删除管理员账户 |
| 证书管理 | 获取/导入数字证书 |
| 系统升级 | 版本管理、在线升级 |
| 配置备份/恢复 | 配置文件备份、恢复、查看进度 |

---

## 十一、协同联动

| 功能 | 说明 |
|------|------|
| ESP-C管理 | 企业安全中心配置 |
| ISOP管理 | 智能安全运营平台配置 |
| LAS管理 | 日志审计系统配置 |
| 联动地址设置 | 设置安全管理平台联动地址 |
| 平台列表 | 获取安全管理平台列表 |
| 删除平台 | 删除安全管理平台 |

---

## 十二、网络诊断

| 功能 | 说明 |
|------|------|
| Ping测试 | 测试网络连通性 |
| Traceroute | 路径追踪 |
| 路径分析 | 分析网络路径 |

---

## 十三、应用层控制

| 功能 | 说明 |
|------|------|
| 应用列表 | 获取应用特征库列表 |
| 应用控制策略 | 获取/创建应用控制策略 |

---

## 十四、VPN管理

| 功能 | 说明 |
|------|------|
| IPSec VPN | 获取/添加IPSec VPN配置 |
| SSL VPN | 获取SSL VPN配置 |

---

## 十五、高可用性

| 功能 | 说明 |
|------|------|
| HA状态 | 获取高可用集群状态 |
| HA配置 | 获取/更新高可用配置 |

---

## 十六、其他对象管理

| 功能 | 说明 |
|------|------|
| 防病毒对象 | 管理防病毒相关对象 |
| 地理位置对象 | 管理地理位置IP对象 |
| 应用对象 | 管理应用特征对象 |

---

## 功能统计

| 类别 | 数量 |
|------|------|
| 模块总数 | 16大模块 |
| 功能总数 | 100+项 |

---

## 使用方式

### 单次操作
```bash
python scripts/nsf_api_client.py <host> <token> <operation> [parameters]
```

### 批量操作
```bash
python scripts/nsf_batch_operations.py <host> <token> <batch_file>
```

### 日志查看
```bash
python scripts/nsf_log_viewer.py [options]
```

---

## API端点格式

```
{schema}://{host}:{port}/north/nf/{resource}
```

- **schema**: https 或 http
- **host**: 防火墙IP地址
- **port**: 服务端口（默认8081）
- **resource**: 资源路径

---

## 认证方式

使用Token认证，Token需从防火墙Web界面生成：
1. 登录防火墙Web管理界面
2. 进入"系统管理"->"API管理"
3. 生成新的API Token
4. 复制Token供本技能使用

---

## 安全说明

- Token不会存储在本地文件中
- Token仅存储在内存中，程序结束即清除
- 日志文件不记录Token信息
- 设备信息不会持久化存储
- 建议定期清理日志文件

---

*文档版本: 1.0*
*更新日期: 2026-01-20*
